# Copyright (C) 2018 Sebastian Pipping <sebastian@pipping.org>
# Licensed under the MIT license

language: cpp
dist: trusty

env:
  global:
    - CFLAGS='-g -pipe'

addons:
  apt:
    packages:
      - doxygen
      - graphviz
      - libcpptest-dev

script:
  - mkdir build
  - cd build
  - cmake .. -DCMAKE_INSTALL_PREFIX=`pwd`/install
  - cmake --build . --target install
  - cd ..
  - rm -fr build 
  - set -e
  - bash autogen.sh
  - bash configure
  - make distcheck
